<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Diret√≥rio de Gladimir</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: monospace;
      background-color: #000;
      color: #33ff33;
      margin: 0;
      padding: 20px;
      transition: all 0.3s;
    }
    .breadcrumb a {
      color: #33ff33;
      text-decoration: none;
      margin-right: 5px;
    }
    .breadcrumb a:hover {
      text-decoration: underline;
    }
    .file-list {
      list-style: none;
      padding: 0;
      margin-top: 10px;
    }
    .file-list li {
      font-size: 18px;
      margin: 5px 0;
    }
    .folder::before {
      content: "üìÅ ";
    }
    .file::before {
      content: "üìÑ ";
    }
    .back {
      display: inline-block;
      margin-bottom: 10px;
      font-size: 18px;
    }
    .dark {
      background-color: #000;
      color: #33ff33;
    }
    .light {
      background-color: #fff;
      color: #000;
    }
    .toggle {
      position: fixed;
      top: 10px;
      right: 10px;
      padding: 5px 10px;
      cursor: pointer;
    }
  </style>
</head>
<body class="dark">
  <button class="toggle" onclick="alternarTema()">üåû/üåô</button>

  <div class="breadcrumb" id="breadcrumb"></div>
  <div class="back" id="voltar"></div>
  <ul class="file-list" id="lista"></ul>
  <div id="total"></div>

  <script>
    const especiais = ['/SENAC/UniSENAC', '/SENAC/tec', '/SENAC/escola'];
    const pastaAtual = window.location.pathname.replace(/\/$/, '');
    if (especiais.includes(pastaAtual)) {
      // Se estiver numa pasta com index pr√≥prio, n√£o carrega nada
      console.log('P√°gina especial. Index n√£o sobreposto.');
    } else {
      fetch('/files.json')
        .then(r => r.json())
        .then(dados => {
          const lista = document.getElementById('lista');
          const breadcrumb = document.getElementById('breadcrumb');
          const voltar = document.getElementById('voltar');
          const total = document.getElementById('total');

          const atual = window.location.pathname.replace(/\/$/, '');
          const caminho = atual.split('/').filter(x => x);
          let caminhoRel = '';

          breadcrumb.innerHTML = '<a href="/">~/</a>';
          caminho.forEach((pasta, i) => {
            caminhoRel += '/' + pasta;
            breadcrumb.innerHTML += `<a href="${caminhoRel}/">${pasta}/</a>`;
          });

          if (atual !== '') {
            const anterior = atual.split('/').slice(0, -1).join('/') || '/';
            voltar.innerHTML = `<a href="${anterior}/">‚Ü©Ô∏è Voltar</a>`;
          }

          let cont = 0;
          dados.filter(e => e.path.startsWith(atual.slice(1) + '/') || (atual === '' && !e.path.includes('/')))
            .forEach(e => {
              const resto = e.path.replace(atual.slice(1) + '/', '');
              if (!resto.includes('/')) {
                const tipo = e.type === 'folder' ? 'folder' : 'file';
                lista.innerHTML += `<li class="${tipo}"><a href="${e.path + (e.type === 'folder' ? '/' : '')}">${e.name}</a></li>`;
                cont++;
              }
            });

          total.innerHTML = `<br/>${cont} item(ns)`;
        });

      function alternarTema() {
        document.body.classList.toggle('dark');
        document.body.classList.toggle('light');
      }
    }
  </script>
</body>
</html>
