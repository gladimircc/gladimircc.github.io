<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prof. Gladimir Ceroni Catarino</title>
  <style>
    body {
      background-color: #000;
      color: #33ff33;
      font-family: monospace;
      padding: 1rem;
    }
    a {
      color: inherit;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .logo {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .breadcrumb {
      margin: 1rem 0;
      color: #66ff66;
    }
    .breadcrumb a {
      color: #66ff66;
    }
    .file-list {
      list-style: none;
      padding-left: 0;
    }
    .file-list li {
      margin: 0.25rem 0;
    }
    .folder::before {
      content: "üìÅ ";
    }
    .file::before {
      content: "üìÑ ";
    }
    .info {
      margin-top: 1rem;
      color: #999;
    }
    .back {
      margin-bottom: 1rem;
      display: inline-block;
      color: #33ff33;
      cursor: pointer;
    }
    .toggle-theme {
      position: fixed;
      top: 1rem;
      right: 1rem;
      cursor: pointer;
      background: #222;
      color: #33ff33;
      padding: 0.5rem 1rem;
      border: 1px solid #33ff33;
      font-size: 0.9rem;
    }
    .light-theme {
      background-color: #fff;
      color: #000;
    }
    .light-theme .toggle-theme {
      background: #eee;
      color: #000;
      border: 1px solid #000;
    }
  </style>
</head>
<body>
  <div class="logo">
    <img src="https://gladimircc.github.io/identidade_visual/unisenac_campus_pelotas2.jpg" alt="Logo UniSENAC" width="120">
    <h1>Prof. Gladimir Ceroni Catarino</h1>
  </div>

  <div class="back" onclick="goBack()">‚Ü©Ô∏è Voltar</div>

  <div class="breadcrumb" id="breadcrumb"></div>

  <ul class="file-list" id="fileList"></ul>

  <div class="info" id="info"></div>

  <button class="toggle-theme" onclick="toggleTheme()">Alternar tema</button>

  <script>
    const fileList = document.getElementById('fileList');
    const breadcrumb = document.getElementById('breadcrumb');
    const info = document.getElementById('info');
    const pathAtual = decodeURIComponent(window.location.pathname.replace(/^\//, '').replace(/\/$/, ''));

    fetch('/files.json')
      .then(res => res.json())
      .then(data => {
        const pastas = data.filter(f => f.type === 'folder' && f.path.startsWith(pathAtual));
        const arquivos = data.filter(f => f.type === 'file' && f.path.startsWith(pathAtual));

        const nivel = pathAtual ? pathAtual.split('/') : [];
        let base = '';
        breadcrumb.innerHTML = '<a href="/">~/</a>' + nivel.map((p, i) => {
          base += (i === 0 ? '' : '/') + p;
          return ` / <a href="/${base}/">${p}</a>`;
        }).join('');

        fileList.innerHTML = '';
        const todos = [...pastas, ...arquivos]
          .filter(f => f.path.split('/').length === (pathAtual ? pathAtual.split('/').length + 1 : 1))
          .sort((a, b) => a.name.localeCompare(b.name));

        todos.forEach(entry => {
          const li = document.createElement('li');
          li.className = entry.type;
          const a = document.createElement('a');
          a.href = (entry.type === 'folder' ? `/${entry.path}/` : `/${entry.path}`);
          a.textContent = entry.name;
          li.appendChild(a);
          fileList.appendChild(li);
        });

        info.textContent = `${pastas.length} pasta(s), ${arquivos.length} arquivo(s)`;
      });

    function goBack() {
      const split = pathAtual.split('/');
      split.pop();
      const back = '/' + split.join('/') + '/';
      window.location.href = back === '//' ? '/' : back;
    }

    function toggleTheme() {
      document.body.classList.toggle('light-theme');
    }
  </script>
</body>
</html>
